<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoiceChat - Modern Communication</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Left Sidebar - Channels -->
        <div class="sidebar left-sidebar">
            <div class="server-header">
                <div class="server-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                </div>
                <h2>VoiceChat</h2>
            </div>

            <div class="channels-section">
                <div class="section-header">
                    <span class="section-title">Text Channels</span>
                    <button class="icon-btn" onclick="showCreateChannelModal()" title="Create Channel">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                        </svg>
                    </button>
                </div>
                <div class="channels-list" id="channelsList">
                    <div class="channel-item active" data-channel="general" onclick="selectChannel('general')">
                        <span class="channel-icon">#</span>
                        <span class="channel-name">general</span>
                    </div>
                </div>
            </div>

            <div class="voice-channels-section">
                <div class="section-header">
                    <span class="section-title">Voice Channels</span>
                    <button class="icon-btn" onclick="showCreateVoiceChannelModal()" title="Create Voice Channel">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                        </svg>
                    </button>
                </div>
                <div class="channels-list" id="voiceChannelsList">
                    <div class="channel-item voice" data-voice-channel="general-voice" onclick="joinVoiceChannel('general-voice')">
                        <span class="channel-icon">üéôÔ∏è</span>
                        <span class="channel-name">General Voice</span>
                    </div>
                </div>
            </div>

            <div class="user-profile-card">
                <div class="user-avatar-wrapper">
                    <div class="user-avatar" id="userAvatar">G</div>
                    <div class="status-indicator online" id="statusIndicator"></div>
                </div>
                <div class="user-info">
                    <div class="username" id="username">Guest</div>
                    <div class="user-id" id="userId">#0000</div>
                </div>
                <button class="icon-btn settings-btn" onclick="showSettingsModal()" title="Settings">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <div class="chat-header">
                <div class="channel-header-info">
                    <div class="channel-icon-header">#</div>
                    <div class="channel-info">
                        <h3 id="currentChannelName">general</h3>
                        <p class="channel-topic" id="channelTopic">Welcome to the general channel</p>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="action-btn" onclick="toggleMute()" id="btnMute" title="Mute/Unmute">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                        </svg>
                    </button>
                    <button class="action-btn" onclick="toggleDeafen()" id="btnDeafen" title="Deafen/Undeafen">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3.63 3.63c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L7.29 8.7 7 9H3v6h4l5 5v-6.59l4.18 4.18c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l5.19-5.19c.39-.39.39-1.02 0-1.41L3.63 3.63zM19 12c0 .63-.24 1.2-.64 1.65l1.46 1.46C20.88 14.3 21 13.19 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zm-5-4.17l1.88 1.88-1.6 1.6V7.83zm0-4.08v4.61l2 2V2.34c0-.89-1.08-1.34-1.71-.71L9.91 5.28l1.41 1.41L14 2.75z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="messages-container" id="messagesContainer">
                <div class="welcome-screen">
                    <div class="welcome-icon">üí¨</div>
                    <h1>Welcome to VoiceChat!</h1>
                    <p>This is the beginning of the <strong>#general</strong> channel.</p>
                    <p class="welcome-hint">Start chatting by typing a message below.</p>
                </div>
            </div>

            <div class="message-input-area">
                <div class="input-container">
                    <div class="input-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                    <input type="text" id="messageInput" placeholder="Type a message..." onkeypress="handleMessageKeyPress(event)">
                    <button class="send-button" onclick="sendMessage()" id="sendBtn" title="Send (Enter)">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Right Sidebar - Members -->
        <div class="sidebar right-sidebar">
            <div class="members-header">
                <span class="members-title">Members</span>
                <span class="members-count" id="usersCount">0</span>
            </div>
            <div class="members-list" id="usersList">
                <!-- Users will be added here -->
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="createChannelModal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'createChannelModal')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3>Create Text Channel</h3>
                <button class="modal-close" onclick="closeModal('createChannelModal')">√ó</button>
            </div>
            <div class="modal-body">
                <label>Channel Name</label>
                <input type="text" id="newChannelName" placeholder="e.g. general" autofocus>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('createChannelModal')">Cancel</button>
                <button class="btn-primary" onclick="createChannel()">Create</button>
            </div>
        </div>
    </div>

    <div id="createVoiceChannelModal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'createVoiceChannelModal')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3>Create Voice Channel</h3>
                <button class="modal-close" onclick="closeModal('createVoiceChannelModal')">√ó</button>
            </div>
            <div class="modal-body">
                <label>Channel Name</label>
                <input type="text" id="newVoiceChannelName" placeholder="e.g. General Voice" autofocus>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('createVoiceChannelModal')">Cancel</button>
                <button class="btn-primary" onclick="createVoiceChannel()">Create</button>
            </div>
        </div>
    </div>

    <div id="settingsModal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'settingsModal')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="modal-close" onclick="closeModal('settingsModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="settingsUsername" placeholder="Enter your username">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeModal('settingsModal')">Cancel</button>
                <button class="btn-primary" onclick="saveSettings()">Save Changes</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@8.0.0/dist/browser/signalr.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
